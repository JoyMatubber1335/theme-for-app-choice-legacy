{{ 'products-review.css' | asset_url | stylesheet_tag }}
<script src="{{ 'products-review.js' | asset_url }}" defer></script>

{% assign selectedProduct = product %}
{% assign section_id = section.id | append: '-reviews' %}

<div
  class="review-extension-container"
  id="product-review-app-{{ section.id }}"
  data-section-id="{{ section.id }}"
  data-product-id="{{ product.id }}"
  data-customer-id="{{ customer.id }}"
  data-customer-email="{{ customer.email }}"
  data-customer-name="{{ customer.name }}"
  data-shop-domain="{{ shop.permanent_domain }}"
  data-star-filled-color="#FFD700"
  data-star-empty-color="#CCCCCC"
>

  <div class="review-summary" id="review-summary-{{ section.id }}"></div>
  <div class="review-form">
    <form id="review-submission-form-{{ section.id }}">
      <div class="form-group">
        <label>Image</label>
        <input type="file" id="reviewImage-{{ section.id }}" name="reviewImage" accept="image/*" required>
      </div>
      <div class="form-group">
        <label>Rating</label>
        <div class="star-rating" id="form-star-rating-{{ section.id }}">
          {% for i in (1..5) %}
            <span class="star" data-value="{{ i }}">&#9734;</span>
          {% endfor %}
        </div>
        <input type="hidden" name="rating" id="rating-value-{{ section.id }}" required>
      </div>

      <div class="form-group">
        <label for="reviewText-{{ section.id }}">Review</label>
        <textarea id="reviewText-{{ section.id }}" name="reviewText" rows="4" required></textarea>
      </div>

      <button type="submit" id="submit-review-btn-{{ section.id }}">Submit Review</button>
      <div class="reviews-message" id="form-message-{{ section.id }}" style="display:none; margin-top:10px;"></div>
    </form>
  </div>

  <div class="reviews-list" id="reviews-list-{{ section.id }}">
    <div class="review-spinner" id="reviews-spinner-{{ section.id }}"><div></div></div>
  </div>
</div>
